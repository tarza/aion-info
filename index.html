<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AION Advisor (UX & Accessibility Updated)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a237e; --secondary-color: #2962ff; --light-bg: #f0f2f5;
            --white-bg: #ffffff; --text-color: #333; --border-color: #e0e0e0;
            --green-color: #25D366; --special-bg: #fffbe6; --special-border: #ffe58f;
        }
        body {
            font-family: 'Sarabun', sans-serif; background-color: var(--light-bg);
            color: var(--text-color); margin: 0; padding: 10px; box-sizing: border-box;
        }
        .container {
            width: 100%; max-width: 960px; margin: auto; background-color: var(--white-bg);
            border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            padding: 20px 40px; box-sizing: border-box;
        }
        h1, h2, h3, h4 { color: var(--primary-color); text-align: center; }
        h4 {
            margin-top: 30px; margin-bottom: 15px; padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color); text-align: left;
        }
        .nav-tabs { display: flex; border-bottom: 2px solid var(--border-color); margin-bottom: 30px; }
        .nav-tab {
            padding: 15px 10px; cursor: pointer; font-size: 16px; font-weight: 600;
            border-bottom: 4px solid transparent; transition: all 0.3s ease;
            text-align: center; flex-grow: 1;
        }
        .nav-tab.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .view { display: none; }
        .view.active { display: block; }
        .form-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 25px; margin-bottom: 25px;
        }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { margin-bottom: 8px; font-weight: 600; color: #555; cursor: pointer; }
        .form-group input, .form-group select {
            padding: 12px; border: 1px solid var(--border-color); border-radius: 8px;
            font-size: 16px; box-sizing: border-box; font-family: 'Sarabun', sans-serif;
        }
        .checkbox-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; }
        /* NEW: Changed checkbox-label to a div wrapper */
        .checkbox-wrapper {
            background-color: #f8f9fa; padding: 10px; border-radius: 6px;
        }
        .checkbox-wrapper label { font-weight: normal; }
        .checkbox-wrapper input { margin-right: 10px; }
        /* UPDATED: Button Style */
        .action-button {
            display: flex; align-items: center; justify-content: center; width: 100%;
            background-image: linear-gradient(to right, #4e54c8 0%, #8f94fb 51%, #4e54c8 100%);
            background-size: 200% auto;
            color: white; border: none; padding: 15px; font-size: 18px; font-weight: bold;
            border-radius: 8px; cursor: pointer; transition: 0.5s;
            margin-top: 30px; box-shadow: 0 4px 15px 0 rgba(76, 76, 175, 0.4);
        }
        .action-button:hover { background-position: right center; }
        .action-button .spinner {
            display: none;
            width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%; border-top-color: #fff;
            animation: spin 1s ease-in-out infinite; margin-right: 10px;
        }
        .action-button.loading .spinner { display: block; }
        .action-button.loading .btn-text { display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }

        #results-container, #comparison-results-container { margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 8px; }
        .result-card, .contact-card {
            border: 1px solid var(--border-color); border-radius: 8px; padding: 20px;
            margin-bottom: 20px; background-color: var(--white-bg);
        }
        .features-list { list-style-type: '‚úì '; padding-left: 20px; margin-top: 10px; }
        .features-list li { margin-bottom: 5px; }

        /* --- NEW: Media Queries for Mobile --- */
        @media (max-width: 768px) {
            .container {
                padding: 15px 20px;
            }
            .nav-tab {
                font-size: 14px;
                padding: 12px 5px;
            }
            .form-grid {
                grid-template-columns: 1fr; /* Single column on mobile */
            }
            h1 { font-size: 24px; }
            h2 { font-size: 20px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üöó AION Advisor</h1>
        
        <div class="nav-tabs">
            <div class="nav-tab active" data-view="wizard-view">1. ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà</div>
            <div class="nav-tab" data-view="comparison-view">2. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡πÄ‡∏õ‡∏Ñ</div>
        </div>

        <div id="wizard-view" class="view active">
             <h4>‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h4>
            <div class="form-grid">
                <div class="form-group">
                    <label for="profession-select">‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</label> <select id="profession-select">
                        <option value="company_employee">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</option> <option value="business_owner">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à / ‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢</option> <option value="freelance">‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå</option> <option value="student">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</option> <option value="government_officer">‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</option> <option value="doctor">‡πÅ‡∏û‡∏ó‡∏¢‡πå</option> <option value="pilot">‡∏ô‡∏±‡∏Å‡∏ö‡∏¥‡∏ô</option> <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="birth-day-select">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏≠‡∏∞‡πÑ‡∏£</label> <select id="birth-day-select">
                        <option value="monday">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</option><option value="tuesday">‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</option><option value="wednesday">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò (‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô)</option><option value="wednesday_night">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò (‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô)</option><option value="thursday">‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ</option><option value="friday">‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå</option><option value="saturday">‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå</option><option value="sunday">‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</option>
                    </select>
                </div>
            </div>
            <h4>‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°</h4>
            <div class="form-grid">
                <div class="form-group">
                    <label for="budget-slider">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</label> <input type="range" id="budget-slider" min="400000" max="2000000" step="50000" value="1200000">
                    <span id="budget-value">1,200,000 ‡∏ö‡∏≤‡∏ó</span>
                </div>
                <div class="form-group">
                    <label for="daily-km-select">‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏Å‡∏°.)</label> <select id="daily-km-select"><option value="30">&lt; 30 ‡∏Å‡∏°.</option><option value="60">30 - 60 ‡∏Å‡∏°.</option><option value="100">60 - 100 ‡∏Å‡∏°.</option><option value="150">&gt; 100 ‡∏Å‡∏°.</option></select>
                </div>
            </div>
            <button id="recommend-btn" class="action-button">
                <div class="spinner"></div>
                <span class="btn-text">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì!</span>
            </button>
            <div id="results-container"></div>
        </div>

        <div id="comparison-view" class="view">
            </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // ... Database and other setup code remains the same ...
    const carData = [
        { id: 'ut_std', model: 'AION UT', subModel: '420 Standard', price: 499900, range: 420, hp: 136, space: 2, tags: ['city', 'value'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏Å‡∏∞‡∏ó‡∏±‡∏î‡∏£‡∏±‡∏î ‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß', '‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°'] },
        { id: 'ut_prem', model: 'AION UT', subModel: '500 Premium', price: 649900, range: 500, hp: 204, space: 2, tags: ['city', 'value', 'long_trip', 'performance'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô ‡∏Ç‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏Å', '‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏Å‡∏•‡∏Ç‡∏∂‡πâ‡∏ô'] },
        { id: 'y_410', model: 'AION Y Plus', subModel: '410 Premium', price: 769900, range: 410, hp: 204, space: 4, tags: ['city', 'family', 'value', 'space'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏´‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Ñ‡∏•‡∏≤‡∏™', '‡πÄ‡∏ö‡∏≤‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏ô‡∏≠‡∏ô‡πÑ‡∏î‡πâ (Camping Mode)'] },
        { id: 'y_490', model: 'AION Y Plus', subModel: '490 Premium', price: 829900, range: 490, hp: 204, space: 4, tags: ['family', 'long_trip', 'space'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤‡∏Å‡∏£‡∏∞‡∏à‡∏Å Panoramic', '‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏Å‡∏• ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß'] },
        { id: 'v_620', model: 'AION V', subModel: '620 Luxury', price: 999900, range: 602, hp: 224, space: 5, tags: ['family', 'long_trip', 'tech', 'space', 'camping'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡πÄ‡∏ö‡∏≤‡∏∞‡∏ô‡∏ß‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ñ‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤', '‡∏°‡∏µ‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß (Cool box)', 'SUV ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà ‡∏≠‡∏≠‡∏õ‡∏ä‡∏±‡πà‡∏ô‡∏Ñ‡∏£‡∏ö'] },
        { id: 'ht_prem', model: 'HYPTEC HT', subModel: '620 Premium', price: 1449000, range: 620, hp: 340, space: 5, tags: ['performance', 'long_trip', 'family', 'tech', 'design', 'business'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡∏™‡∏π‡∏á 340 ‡πÅ‡∏£‡∏á‡∏°‡πâ‡∏≤', '‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö'] },
        { id: 'ht_lux', model: 'HYPTEC HT', subModel: '620 Luxury (Gull-Wing)', price: 1749000, range: 620, hp: 340, space: 5, tags: ['performance', 'long_trip', 'family', 'tech', 'design', 'business'], features: ['‡∏Å‡∏£‡∏≠‡∏á‡∏ù‡∏∏‡πà‡∏ô PM2.5', '‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏õ‡∏µ‡∏Å‡∏ô‡∏Å (Gull-Wing Doors)', '‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤ ‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô'] }
    ];

    function init() {
        // ... Other init code ...
        document.getElementById('recommend-btn').addEventListener('click', handleRecommendation);
    }
    
    // --- UPDATED: Recommendation Logic with Loading Animation ---
    function handleRecommendation() {
        const recommendBtn = document.getElementById('recommend-btn');
        const resultsContainer = document.getElementById('results-container');
        
        // Start loading animation
        recommendBtn.classList.add('loading');
        resultsContainer.innerHTML = '';

        // Simulate a delay for processing
        setTimeout(() => {
            const inputs = {
                budget: Number(document.getElementById('budget-slider').value),
                dailyKm: Number(document.getElementById('daily-km-select').value),
                // ... gather other inputs ...
            };

            let recommendations = carData.map(car => {
                let score = 0;
                if (car.price > inputs.budget) return { ...car, score: -1 };
                score += 10;
                if ((car.range / inputs.dailyKm) < 4 && inputs.dailyKm > 60) score -= 5;
                // ... other scoring logic ...
                return { ...car, score };
            });

            recommendations = recommendations.filter(car => car.score > 0).sort((a, b) => b.score - a.score);
            renderWizardResults(recommendations.slice(0, 3), inputs);

            // Stop loading animation
            recommendBtn.classList.remove('loading');

        }, 500); // 0.5 second delay
    }

    function renderWizardResults(cars, inputs) {
        // ... Rendering logic remains the same ...
    }

    // ... Other functions (comparison, etc.) remain the same ...

    init();
});
</script>

</body>
</html>
