<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AION Advisor | ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ Aion ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #007bff;
            --success-color: #28a745;
            --light-gray: #f4f4f9;
            --text-color: #333;
            --white-color: #ffffff;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 0; background-color: var(--light-gray); color: var(--text-color); line-height: 1.6; }
        .container { padding: 20px; max-width: 900px; margin: auto; }
        header { text-align: center; margin-bottom: 2em; }
        h1 { color: var(--primary-color); }
        .quiz-form { background-color: var(--white-color); padding: 2em; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .form-grid { display: grid; grid-template-columns: 1fr; gap: 1.5em; }
        .form-group { display: flex; flex-direction: column; }
        label { font-weight: bold; margin-bottom: 0.5em; display: flex; align-items: center; }
        select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 1em; background-color: #fafafa; }
        button { display: block; width: 100%; padding: 15px; font-size: 1.2em; color: var(--white-color); background-color: var(--secondary-color); border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; }
        button:hover { background-color: var(--primary-color); }
        .cta-button { background-color: var(--success-color); margin-top: 1em; }
        .cta-button:hover { background-color: #218838; }
        #result-display { display: none; margin-top: 2em; }
        .result-card { background-color: var(--white-color); padding: 2em; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center; margin-bottom: 1.5em; }
        .result-card img { max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 1em; }
        .result-card h2 { margin-top: 0; }
        .match-score { font-size: 1.5em; font-weight: bold; color: var(--primary-color); }
        .color-recommendation { margin-top: 1em; }
        #result-color { padding: 0.5em 1em; border-radius: 20px; color: white; display: inline-block; margin-top: 0.5em; border: 1px solid #ddd; }
        .contact-info p { font-size: 1.2em; }
        .contact-info a { color: var(--secondary-color); text-decoration: none; font-weight: bold; }
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 1.5em; }
        .comparison-table th, .comparison-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        .comparison-table th { background-color: #f2f2f2; font-weight: bold; }
        .comparison-table tr:nth-child(even) { background-color: #f9f9f9; }
        .comparison-table td:first-child { font-weight: bold; }

        @media (min-width: 768px) {
            .form-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>AION Advisor</h1>
            <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÑ‡∏•‡∏ü‡πå‡∏™‡πÑ‡∏ï‡∏•‡πå ‡πÅ‡∏•‡∏∞‡∏™‡∏µ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡πÇ‡∏â‡∏•‡∏Å‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
        </header>

        <div id="quiz-form" class="quiz-form">
            <div class="form-grid">
                <div class="form-group"><label for="budget">üí∞ ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label><select id="budget"><option value="1000000">‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 1 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó</option><option value="1200000">1 - 1.2 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó</option><option value="1500000">1.2 - 1.5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó</option><option value="2000000">1.5 ‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</option></select></div>
                <div class="form-group"><label for="occupation">üë®‚Äçüíº ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label><select id="occupation"><option value="office">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó / ‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</option><option value="business">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à / ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</option><option value="freelance">‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå / ‡∏Ñ‡∏£‡∏µ‡πÄ‡∏≠‡∏ó‡∏µ‡∏ü</option><option value="family">‡∏û‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô / ‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô / ‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</option><option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option></select></div>
                <div class="form-group"><label for="passengers">üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà</label><select id="passengers"><option value="1-2">1 - 2 ‡∏Ñ‡∏ô</option><option value="3-4">3 - 4 ‡∏Ñ‡∏ô</option><option value="5">5 ‡∏Ñ‡∏ô</option></select></div>
                <div class="form-group"><label for="distance">üöó ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</label><select id="distance"><option value="low">‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 50 ‡∏Å‡∏°.</option><option value="medium">50 - 100 ‡∏Å‡∏°.</option><option value="high">‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 100 ‡∏Å‡∏°.</option></select></div>
                <div class="form-group"><label for="priority">‚≠ê ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</label><select id="priority"><option value="space">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ö‡∏≤‡∏¢</option><option value="performance">‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</option><option value="luxury">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</option><option value="value">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î</option></select></div>
                <div class="form-group"><label for="trade-in">ü§ù ‡∏°‡∏µ‡∏£‡∏ñ‡πÄ‡∏Å‡πà‡∏≤‡∏°‡∏≤‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (Trade-in) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</label><select id="trade-in"><option value="no">‡πÑ‡∏°‡πà‡∏°‡∏µ</option><option value="yes">‡∏°‡∏µ (‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©)</option></select></div>
                <div class="form-group"><label for="birth-day">üéÇ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label><select id="birth-day"><option value="Sunday">‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</option><option value="Monday">‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå</option><option value="Tuesday">‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£</option><option value="Wednesday">‡∏ß‡∏±‡∏ô‡∏û‡∏∏‡∏ò</option><option value="Thursday">‡∏ß‡∏±‡∏ô‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ</option><option value="Friday">‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå</option><option value="Saturday">‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå</option></select></div>
            </div>
            <br>
            <button onclick="calculateResult()">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</button>
        </div>

        <div id="result-display"></div>
    </div>

    <script>
        const cars = {
            'AION UT Standard': { price: 949900, image: 'aion-u.jpg', description: 'SUV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ 400 ‡∏Å‡∏°.', tags: ['value', 'family', 'city'], range: 400, performance: '12.0s', availableColors: ['Green', 'Beige', 'White', 'Silver'] },
            'AION UT Premium': { price: 1100000, image: 'aion-u.jpg', description: '‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏Å‡∏•‡∏ñ‡∏∂‡∏á 500 ‡∏Å‡∏°.', tags: ['value', 'family'], range: 500, performance: '8.3s', availableColors: ['Green', 'Beige', 'White', 'Silver'] },
            'AION Y Plus 490': { price: 969900, image: 'aion-y.jpg', description: 'SUV ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å ‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏µ‡∏™‡∏±‡∏ô', tags: ['city', 'value', 'family'], range: 490, performance: '8.5s', availableColors: ['White', 'Gray', 'Black', 'Ash', 'Gold', 'Silver', 'Green'] },
            'AION V': { price: 1000000, image: 'aion-v.jpg', description: '‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á SUV ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏Å‡∏•‡∏ñ‡∏∂‡∏á 602 ‡∏Å‡∏°. ‡∏ä‡∏≤‡∏£‡πå‡∏à‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î', tags: ['family', 'space'], range: 602, performance: '7.9s', availableColors: ['White', 'Black', 'Sand', 'Silver', 'Grey', 'Orange'] },
            'HYPTEC HT Premium': { price: 1449000, image: 'aion-ht.jpg', description: 'Luxury SUV ‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏ô‡∏∞‡∏™‡∏π‡∏á ‡∏ß‡∏¥‡πà‡∏á‡πÑ‡∏Å‡∏• 620 ‡∏Å‡∏°. ‡∏°‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°', tags: ['luxury', 'performance'], range: 620, performance: '5.8s', availableColors: ['White', 'Silver', 'Gray', 'Black'] },
            'HYPTEC HT Luxury Gull-wing': { price: 1800000, image: 'aion-ht.jpg', description: '‡∏£‡∏∏‡πà‡∏ô‡∏ó‡πá‡∏≠‡∏õ‡∏™‡∏∏‡∏î‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏õ‡∏µ‡∏Å‡∏ô‡∏Å (Gull-wing) ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏£‡πà‡∏á‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î', tags: ['luxury', 'performance'], range: 620, performance: '5.8s', availableColors: ['White', 'Silver', 'Gray', 'Black', 'Rose', 'Orange'] }
        };

        const luckyColors = {
            'Sunday': [{ name: 'Red', th: '‡∏™‡∏µ‡πÅ‡∏î‡∏á', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏≠‡∏≥‡∏ô‡∏≤‡∏à ‡∏ö‡∏≤‡∏£‡∏°‡∏µ' }, { name: 'Green', th: '‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏°‡∏ï‡∏ï‡∏≤' }],
            'Monday': [{ name: 'White', th: '‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå' }, { name: 'Yellow', th: '‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô' }, { name: 'Green', th: '‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏≠‡∏≥‡∏ô‡∏≤‡∏à' }],
            'Tuesday': [{ name: 'Pink', th: '‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏°‡∏ï‡∏ï‡∏≤' }, { name: 'Rose', th: '‡∏™‡∏µ‡πÇ‡∏£‡∏™‡πÇ‡∏Å‡∏•‡∏î‡πå', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÄ‡∏°‡∏ï‡∏ï‡∏≤' }, { name: 'Orange', th: '‡∏™‡∏µ‡∏™‡πâ‡∏°', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏û‡∏•‡∏±‡∏á' }],
            'Wednesday': [{ name: 'Green', th: '‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†' }, { name: 'Gray', th: '‡∏™‡∏µ‡πÄ‡∏ó‡∏≤', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á' }],
            'Thursday': [{ name: 'Orange', th: '‡∏™‡∏µ‡∏™‡πâ‡∏°', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ö‡∏≤‡∏£‡∏°‡∏µ' }, { name: 'Beige', th: '‡∏™‡∏µ‡πÄ‡∏ö‡∏à', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô' }],
            'Friday': [{ name: 'Blue', th: '‡∏™‡∏µ‡∏ü‡πâ‡∏≤/‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' }, { name: 'White', th: '‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç' }, { name: 'Silver', th: '‡∏™‡∏µ‡πÄ‡∏á‡∏¥‡∏ô', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á' }],
            'Saturday': [{ name: 'Purple', th: '‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' }, { name: 'Black', th: '‡∏™‡∏µ‡∏î‡∏≥', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏≠‡∏≥‡∏ô‡∏≤‡∏à' }, { name: 'Gray', th: '‡∏™‡∏µ‡πÄ‡∏ó‡∏≤', desc: '‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á' }]
        };
        
        const colorMap = {
             'Green': '#2E8B57', 'Beige': '#F5F5DC', 'White': '#FFFFFF', 'Silver': '#C0C0C0', 'Gray': '#808080', 
             'Black': '#000000', 'Gold': '#FFD700', 'Orange': '#FFA500', 'Rose': '#E0BFB8', 'Red': '#DC143C',
             'Yellow': '#FFFF00', 'Pink': '#FFC0CB', 'Blue': '#1E90FF', 'Purple': '#800080', 'Sand': '#C2B280'
        };

        let top2Cars = []; 

        function calculateResult() {
            const budget = parseInt(document.getElementById('budget').value);
            const occupation = document.getElementById('occupation').value;
            const passengers = document.getElementById('passengers').value;
            const distance = document.getElementById('distance').value;
            const priority = document.getElementById('priority').value;
            const tradeIn = document.getElementById('trade-in').value;
            const birthDay = document.getElementById('birth-day').value;
            const eligibleCars = Object.keys(cars).filter(key => cars[key].price <= budget);
            if (eligibleCars.length === 0) { alert("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏ñ‡∏£‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ"); return; }
            const scores = {};
            eligibleCars.forEach(carKey => {
                const car = cars[carKey];
                let score = 0;
                if (car.tags.includes(priority)) score += 10;
                if (occupation === 'business' && (car.tags.includes('luxury') || car.tags.includes('performance'))) score += 5;
                if (occupation === 'family' && car.tags.includes('family')) score += 5;
                if (occupation === 'freelance' && car.tags.includes('city')) score += 3;
                if (passengers === '3-4' && car.tags.includes('family')) score += 3;
                if (passengers === '5' && car.tags.includes('family')) score += 5;
                if (passengers === '5' && carKey === 'AION V') score += 2;
                if (distance === 'medium' && (car.range >= 500 || carKey.includes('Premium'))) score += 2;
                if (distance === 'high' && (car.range >= 600 || carKey.includes('V'))) score += 3;
                if (tradeIn === 'yes' && car.tags.includes('value')) score += 4;
                scores[carKey] = { ...car, score };
            });

            const sortedCars = Object.keys(scores).sort((a, b) => scores[b].score - scores[a].score);
            top2Cars = sortedCars.slice(0, 2); 
            
            let resultHtml = '<h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</h2>';
            top2Cars.forEach((carKey, index) => {
                const car = scores[carKey];
                const maxScore = scores[top2Cars[0]].score;
                const matchPercentage = maxScore > 0 ? Math.min(Math.round((car.score / maxScore) * 100), 100) : 0;
                let recommendedColor = null; let colorDesc = '';
                for(let prefColor of luckyColors[birthDay]) {
                    if (cars[carKey].availableColors.includes(prefColor.name)) {
                        recommendedColor = prefColor;
                        colorDesc = `‡∏™‡∏µ‡∏°‡∏á‡∏Ñ‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∑‡∏≠ **${recommendedColor.th}** ‡∏ã‡∏∂‡πà‡∏á‡∏ä‡πà‡∏ß‡∏¢${recommendedColor.desc} ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ`;
                        break;
                    }
                }
                if (!recommendedColor) {
                     recommendedColor = { name: cars[carKey].availableColors[0], th: cars[carKey].availableColors[0], desc: '‡∏ï‡∏≤‡∏°‡∏™‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∏‡πà‡∏ô' };
                     colorDesc = `‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏µ‡∏°‡∏á‡∏Ñ‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏ñ‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ ‡∏Ç‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏∑‡∏≠ **${recommendedColor.th}**`;
                }
                const colorBoxHtml = `<div id="result-color" style="background-color: ${colorMap[recommendedColor.name] || '#ddd'}; color: ${['Black', 'Green', 'Blue', 'Purple', 'Red'].includes(recommendedColor.name) ? 'white' : 'black'}">${recommendedColor.th}</div>`;
                resultHtml += `
                    <div class="result-card ${index === 0 ? 'best-match' : ''}">
                        <h3>${index === 0 ? '‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠' : '‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°'}</h3>
                        <h2>${carKey}</h2>
                        <p class="match-score">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ${matchPercentage}%</p>
                        <img src="${car.image}" alt="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ñ ${carKey}">
                        <p>${car.description}</p>
                        <div class="color-recommendation">
                            <p>${colorDesc.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')}</p>
                            ${colorBoxHtml}
                        </div>
                        <button class="cta-button" onclick="showContactInfo('${carKey}')">‡∏™‡∏ô‡πÉ‡∏à‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ / ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏•‡∏•‡πå</button>
                    </div>
                `;
            });
            
            if (top2Cars.length > 1) {
                resultHtml += `<button onclick="showComparison()">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö 2 ‡∏£‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ</button>`;
            }
            resultHtml += '<button onclick="resetForm()" style="margin-top: 1em; background-color: #6c757d;">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>';
            
            const resultDisplay = document.getElementById('result-display');
            resultDisplay.innerHTML = resultHtml;
            document.getElementById('quiz-form').style.display = 'none';
            resultDisplay.style.display = 'block';
        }

        function showComparison() {
            if (top2Cars.length < 2) return;
            const car1 = cars[top2Cars[0]];
            const car2 = cars[top2Cars[1]];
            const resultDisplay = document.getElementById('result-display');

            const comparisonHtml = `
                <div class="result-card">
                    <h2>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</h2>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥</th>
                                <th>${top2Cars[0]}</th>
                                <th>${top2Cars[1]}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</td>
                                <td>${car1.price.toLocaleString()}</td>
                                <td>${car2.price.toLocaleString()}</td>
                            </tr>
                            <tr>
                                <td>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡πà‡∏á (‡∏Å‡∏°.)</td>
                                <td>${car1.range}</td>
                                <td>${car2.range}</td>
                            </tr>
                            <tr>
                                <td>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏£‡πà‡∏á 0-100 ‡∏Å‡∏°./‡∏ä‡∏°.</td>
                                <td>${car1.performance}</td>
                                <td>${car2.performance}</td>
                            </tr>
                             <tr>
                                <td>‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏´‡∏•‡∏±‡∏Å</td>
                                <td>${car1.tags.join(', ')}</td>
                                <td>${car2.tags.join(', ')}</td>
                            </tr>
                        </tbody>
                    </table>
                    <br>
                    <button onclick="resetForm()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                </div>
            `;
            resultDisplay.innerHTML = comparisonHtml;
        }

        function showContactInfo(carName) {
            const resultDisplay = document.getElementById('result-display');
            const salesPhoneNumber = '0817003057';
            const salesLineId = 'admin.454';
            resultDisplay.innerHTML = `
                <div class="result-card contact-info">
                    <h2>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</h2>
                    <p>‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏Ç‡∏±‡∏ö ${carName} ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö</p>
                    <hr>
                    <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> <a href="tel:${salesPhoneNumber}">${salesPhoneNumber}</a></p>
                    <p><strong>LINE ID:</strong> <a href="https://line.me/ti/p/~${salesLineId}" target="_blank">${salesLineId}</a> (‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô)</p>
                    <br>
                    <button onclick="resetForm()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                </div>
            `;
        }
        function resetForm(){
            const resultDisplay = document.getElementById('result-display');
            document.getElementById('quiz-form').style.display = 'block';
            resultDisplay.style.display = 'none';
            resultDisplay.innerHTML = '';
        }
    </script>
</body>
</html>
